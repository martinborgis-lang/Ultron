<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ultron - Preparation RDV</title>
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>ULTRON</h1>
      <p>Assistant Meeting</p>
    </header>

    <div id="login-required" class="section hidden">
      <p>Veuillez vous connecter via l'extension popup.</p>
      <button id="open-popup-btn">Ouvrir le popup</button>
    </div>

    <div id="main-content" class="hidden">
      <!-- Prospect Selection -->
      <div id="prospect-section" class="section">
        <h2>Prochain RDV</h2>
        <div id="prospect-selector">
          <select id="prospect-select">
            <option value="">Selectionner un prospect...</option>
          </select>
          <button id="refresh-prospects" title="Rafraichir">&#8635;</button>
        </div>
      </div>

      <!-- Transcription Section -->
      <div id="transcription-section" class="section hidden">
        <div class="transcription-header">
          <h2>Transcription</h2>
          <div class="transcription-controls">
            <span id="transcription-status" class="status-dot"></span>
            <button id="toggle-transcription" class="transcription-btn">Demarrer</button>
          </div>
        </div>
        <div id="transcription-container" class="transcription-container">
          <div id="transcription-text" class="transcription-text">
            <p class="transcription-placeholder">Selectionnez un prospect puis demarrez la transcription</p>
          </div>
        </div>
        <div id="transcription-actions" class="transcription-actions hidden">
          <button id="save-transcript" class="save-btn">Sauvegarder et generer PDF</button>
        </div>
      </div>

      <!-- Real-time AI Suggestions -->
      <div id="realtime-section" class="section hidden">
        <h2>Suggestions IA temps reel</h2>
        <div id="realtime-suggestions" class="realtime-suggestions">
          <p class="realtime-placeholder">Les suggestions apparaitront pendant la transcription</p>
        </div>
      </div>

      <!-- Prospect Info Card -->
      <div id="prospect-info" class="section hidden">
        <div class="prospect-card">
          <div class="prospect-header">
            <span id="prospect-name" class="prospect-name"></span>
            <div class="badges">
              <span id="prospect-badge" class="badge"></span>
              <span id="prospect-score" class="badge score"></span>
            </div>
          </div>
          <div class="prospect-details">
            <div><strong>Email:</strong> <span id="prospect-email"></span></div>
            <div><strong>Tel:</strong> <span id="prospect-phone"></span></div>
            <div><strong>RDV:</strong> <span id="prospect-rdv"></span></div>
            <div><strong>Profession:</strong> <span id="prospect-profession"></span></div>
            <div><strong>Revenus:</strong> <span id="prospect-revenus"></span></div>
            <div><strong>Patrimoine:</strong> <span id="prospect-patrimoine"></span></div>
            <div><strong>Age:</strong> <span id="prospect-age"></span></div>
            <div><strong>Source:</strong> <span id="prospect-source"></span></div>
          </div>
          <div class="prospect-needs">
            <strong>Besoins exprimes:</strong>
            <p id="prospect-besoins"></p>
          </div>
          <div class="prospect-notes">
            <strong>Notes de l'appel:</strong>
            <p id="prospect-notes"></p>
          </div>
          <div id="prospect-justification" class="prospect-ia hidden">
            <strong>Analyse IA precedente:</strong>
            <p id="prospect-justification-text"></p>
          </div>
        </div>
      </div>

      <!-- Tabs Navigation -->
      <div id="tabs-section" class="section hidden">
        <div class="tabs">
          <button class="tab active" data-tab="questions">Questions</button>
          <button class="tab" data-tab="arguments">Arguments</button>
          <button class="tab" data-tab="attention">Attention</button>
          <button class="tab" data-tab="historique">Historique</button>
        </div>

        <!-- Questions Tab -->
        <div id="tab-questions" class="tab-content active">
          <div id="questions-loading" class="loading">Analyse IA en cours...</div>
          <div id="questions-content" class="hidden">
            <div class="suggestion-group">
              <h3>Questions a poser</h3>
              <ol id="questions-list" class="numbered-list"></ol>
            </div>
          </div>
        </div>

        <!-- Arguments Tab -->
        <div id="tab-arguments" class="tab-content">
          <div id="arguments-loading" class="loading">Analyse IA en cours...</div>
          <div id="arguments-content" class="hidden">
            <div class="suggestion-group">
              <h3>Arguments cles</h3>
              <ul id="arguments-list"></ul>
            </div>
            <div id="profil-section" class="suggestion-group hidden">
              <h3>Profil comportemental</h3>
              <p id="profil-text" class="profil-text"></p>
            </div>
          </div>
        </div>

        <!-- Points d'attention Tab -->
        <div id="tab-attention" class="tab-content">
          <div id="attention-loading" class="loading">Analyse IA en cours...</div>
          <div id="attention-content" class="hidden">
            <div class="suggestion-group warning">
              <h3>Points d'attention</h3>
              <ul id="attention-list"></ul>
            </div>
            <div class="suggestion-group danger">
              <h3>Objections probables</h3>
              <ul id="objections-list"></ul>
            </div>
          </div>
        </div>

        <!-- Historique Tab -->
        <div id="tab-historique" class="tab-content">
          <div id="history-content">
            <div id="history-list" class="history-list">
              <p class="loading">Aucune interaction</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="sidepanel.js"></script>
</body>
</html>
